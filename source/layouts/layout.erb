<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

        <title><%= current_page.data.title || "Factor.io Docs" %></title>

        <style>
            /*<%= Rouge::Themes::Base16.mode(:light).render(scope: '.highlight') %>*/
            <%= Rouge::Themes::Github.render(scope: '.highlight') %>

            div.edit{
              margin-top: 40px;
              width: 100%;
              /*background-color: #fff;*/
              color: #999;
            }
            div.edit > a {
              color: #999;
              text-decoration: none;
            }
            div[role=main] > .step_link{
              text-decoration: none;
            }
            .highlight{
              background-color: #FFF;
            }

            div[role=main] > h1 {
                color: #3dac85;
            }
            div[role=main] > h2 {
                color: #444;
                font-size: 26px;
            }

            div[role=main] > p, li {
                color: #666;
            }
            .table{
                background-color: #FFF;
            }

            #toc > .tocify-header{
                list-style-type: none;
                margin: 0px 0px 0px 20px;
            }


            .tocify-item{
                margin-top: 0px;
            }
            .tocify-item > a, a:hover{
                color: #888;
                text-decoration: none;
            }
            .tocify-item > a:hover{
                color: #888;
                text-decoration: none;
            }

            #toc > .tocify-header > .tocify-subheader{
                list-style-type: none;
                margin: 0px 0px 0px 20px;
            }
        </style>

        <%= stylesheet_link_tag 'https://factor.io/assets/landing.css' %>
        <%= stylesheet_link_tag '//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css' %>
        
    </head>

    <body class="<%= page_classes %>">
        <div id='banner'>
          <div id='container'>
              <div id='header'>
                  <a class='logo' href="/"></a>
                  <a href='https://factor.io/users/sign_in'> Login</a>
                  <a href='https://factor.io/users/sign_up'> Signup</a>
                  <a href='http://blog.factor.io/'> Blog</a>
              </div>
          </div>
      </div>
      <div id='title'>
          <div id='container'>
              <% category = current_page.metadata[:page]['category'] %>
              <% prefix = category ? "#{category}: " : '' %>
              <h2><%= prefix + (current_page.data.title || "Factor.io Docs") %></h2>

          </div>
      </div>


        <div style="background-color: #EEE; padding: 20px 0px; overflow:hidden;">

            <div style="margin-right: auto; margin-left:auto; width: 940px;">
                <div style='width: 240px; float:left; min-height: 1px;'>
                  <%= partial 'navigation' %>
                </div>
                <div style='width: 680px; float:left; min-height: 1px; margin-left: 20px;' role="main">
                  <% if current_page.metadata[:page]['status'] %>
                    <% status = current_page.metadata[:page]['status'] %>
                    <% message = status %>
                    <% state, message = 'danger', "This page has not yet been started" if status=='not started' %>
                    <% state, message = 'danger', "This page is incomplete" if status=='incomplete' %>
                    <% state, message = 'warning', "This page requires revision and may be inaccurate" if status=='revise' %>
                    <div class='alert alert-<%=state%>'><strong><%=message %>.</strong> We are working on adding contents. You can help us improve the contents using the 'Edit this page on Github' button at the bottom.</div>
                  <% end %>
                  <%= yield %>
                  <% if current_page.metadata[:page]['order'] %>
                    <% next_page = sitemap.resources.find{|page| page.metadata[:page]['category']==current_page.metadata[:page]['category'] && page.metadata[:page]['order']==current_page.metadata[:page]['order'] + 1} %>
                    <% previous_page = sitemap.resources.find{|page| page.metadata[:page]['category']==current_page.metadata[:page]['category'] && page.metadata[:page]['order']==current_page.metadata[:page]['order'] - 1} %>

                    <% if next_page %>
                      <a href="/<%= next_page.path %>" class='step_link button'><%= next_page.data.title %></a>
                    <% end %>
                    <% if previous_page %>
                      </br>
                      <a href="/<%= previous_page.path %>" class='step_link'>Previous: <%= previous_page.data.title %></a>
                    <% end %>
                  <% end %>

                  <div class='edit'>
                    <i class='fa fa-github fa-fw'></i>
                    <% source_paths = current_page.source_file.split('/') %>
                    <% path = source_paths[source_paths.index('source')+1..-1] %>
                    <% code_url = "https://github.com/factor-io/docs/tree/master/source/#{path.join('/')}" %>
                    <a href="<%=code_url%>">Edit this page on Github</a>

                  </div>
                </div>
            </div>


            <%= javascript_include_tag  "https://code.jquery.com/jquery-1.10.2.min.js" %>
            <%= javascript_include_tag  "https://code.jquery.com/ui/1.10.2/jquery-ui.min.js" %>
            <%= javascript_include_tag  "bootstrap-3.0.3.min.js" %>
            <%= javascript_include_tag  "prettify-1.0.min.js" %>
            <%= javascript_include_tag  "jquery.tocify.min.js" %>
            <%= javascript_include_tag  "base" %>
        </div>


        <%= partial 'footer' %>
    </body>
</html>
